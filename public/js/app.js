!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=4)}({"/Vo2":function(t,e,a){"use strict";a.r(e),e.default=function(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(t.selector).submit(function(e){e.preventDefault(),TRNMNT_helpers.disableButtons();for(var a=$(this),n=a.serializeArray(),r={},o=0;o<n.length;o+=1){n[o].value&&(r[n[o].name]=n[o].value);var s=a.find("[name="+n[o].name+"]");s.removeClass("is-invalid"),s.closest(".form-group").find(".invalid-feedback").empty()}$.ajax({type:t.method,url:t.url,data:r,dataType:"json",success:function(e){TRNMNT_helpers.enableButtons(),t.success(e)},error:function(t){for(var e in TRNMNT_helpers.onErrorAjax(t),t.responseJSON.errors){var n=t.responseJSON.errors[e],r=a.find("[name="+e+"]");r.addClass("is-invalid");for(var o="",s=0;s<n.length;s+=1)o+=n[s]+"<br>";r.closest(".form-group").find(".invalid-feedback").html(o)}}})})}},4:function(t,e,a){t.exports=a("bUC5")},GGTS:function(t,e){window.TRNMNT_gameFormModule=function(){var t=!1,e=null,a=null,n=null,r=null,o=null,s=null,i=null,l=null,c=null,d=null,p={game:'\n            <tr>\n                <td>#{date}</td>\n                <td class="text-right">#{home_team}</td>\n                <td class="text-right">\n                    <span class="badge badge-primary badge-pill">#{home_score}</span>\n                </td>\n                <td class="text-center">:</td>\n                <td>\n                    <span class="badge badge-primary badge-pill">#{away_score}</span>\n                </td>\n                <td>#{away_team}</td>\n                <td class="text-right">\n                    <button type="button" class="btn btn-primary btn-sm">Заполнить</button>\n                </td>\n            </tr>',player:'\n            <tr data-id="#{id}">\n                <td>#{tag}</td>\n                <td class="text-center">#{position}</td>\n                <td class="text-center">#{goals}</td>\n                <td class="text-center">#{assists}</td>\n                <td class="text-center text-nowrap">#{stars}</td>\n                <td></td>\n            </tr>',starsSelect:'\n            <select class="form-control" name="star">\n                <option value="0">—</option>\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n            </select>',playerForm:'\n            <tr data-id="#{id}">\n                <td>#{player}</td>\n                <td class="text-center">#{position}</td>\n                <td><input type="text" class="text-right form-control" name="goals" value="#{goals}"></td>\n                <td><input type="text" class="text-right form-control" name="assists" value="#{assists}"></td>\n                <td>#{stars}</td>\n                <td>#{button}</td>\n            </tr>\n            '};return{init:function(i,f,h,y,v){if(t)return;t=!0,l=i,d=y,c=+TRNMNT_helpers.parseUrl().segments[4],e=$("#eaGames"),a=$("#getGames"),n=$("#resetGame"),r=$("#homePlayers").find("tbody"),o=$("#awayPlayers").find("tbody"),(s=$("#game-form")).on("submit",g),a.on("click",x),n.on("click",T),v||(u(r,h.home),u(o,h.away));for(var b in f){var _=!0,w=!1,S=void 0;try{for(var M,D=f[b][Symbol.iterator]();!(_=(M=D.next()).done);_=!0){var k=M.value;("home"===b?r:o).append(p.player.format({tag:k.player_tag,position:N(k.position_id,k.position),goals:k.isGoalie?"—":k.goals,assists:k.isGoalie?"—":k.assists,id:k.player_id,stars:m(k.star)}))}}catch(t){w=!0,S=t}finally{try{_||null==D.return||D.return()}finally{if(w)throw S}}}}};function u(t,e){var a="";e.forEach(function(t){a+='<option value="'.concat(t.id,'">').concat(t.tag,"</option>")});var n=$(p.playerForm.format({id:"",player:'<select class="form-control" name="player_id">'.concat(a,"</select>"),position:f(d),stars:p.starsSelect,goals:"",assists:"",button:'<button class="btn btn-primary" type="submit"><i class="fas fa-user-plus"></i></button>'}));n.find("button").on("click",h),t.append(n)}function f(t){var e="";return d.forEach(function(a){var n=t===a.id?"selected":"";e+='<option value="'.concat(a.id,'" ').concat(n,">").concat(a.short_title,"</option>")}),'<select class="form-control" name="position_id">'.concat(e,"</select>")}function h(t){t.preventDefault();var e=$(this).closest("tr"),a={game_id:c,team_id:+e.closest("table").data("id"),player_id:+e.find("select[name=player_id]").val(),position_id:+e.find("select[name=position_id]").val(),goals:+e.find("input[name=goals]").val(),assists:+e.find("input[name=assists]").val(),star:+e.find("select[name=star]").val()};console.log(a);var n=e.find("select[name=player_id] option[value="+a.player_id+"]");e.closest("tbody").prepend(p.playerForm.format({player:n.text(),position:f(a.position_id),goals:a.goals,assists:a.assists})),n.remove()}function m(t){for(var e="",a=0;a<t;a+=1)e+='<i class="fas fa-star text-danger"></i>';return e}function g(t){t.preventDefault(),TRNMNT_helpers.disableButtons(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:l.saveGame,dataType:"json",contentType:"json",processData:!1,data:i?y():v(),success:b,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})}function y(){for(var t in i.game){var e=$("#".concat(t));if(!1===e.prop("readonly")){var a=e.val();-1!==t.indexOf("_percent")&&(a=a?parseFloat(a.replace(",",".")):0),i.game[t]=a}}var n={};for(var s in r.find("select").each(h),o.find("select").each(h),i.players){var l=!0,c=!1,d=void 0;try{for(var p,u=i.players[s][Symbol.iterator]();!(l=(p=u.next()).done);l=!0){var f=p.value;f.star=n[f.player_id]}}catch(t){c=!0,d=t}finally{try{l||null==u.return||u.return()}finally{if(c)throw d}}}return JSON.stringify(i);function h(t,e){var a=$(e),r=a.closest("tr").data("id");n[r]=+a.val()}}function v(){for(var t=s.serializeArray(),e={game:{}},a=0;a<t.length;a+=1)if(t[a].value){var n=t[a].value;-1!==t[a].name.indexOf("_percent")&&(n=parseFloat(n.replace(",","."))),e.game[t[a].name]=n}return s.find("input[type=checkbox]").each(function(t,a){e.game[a.id]=+$(a).prop("checked")}),JSON.stringify(e)}function b(t){TRNMNT_helpers.enableButtons(),TRNMNT_helpers.showNotification(t.message),i&&(i=null)}function x(){TRNMNT_helpers.disableButtons(),e.empty(),$.ajax({url:l.lastGames,success:_,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})}function T(){confirm("На самом деле хотите обнулить протокол?")&&(s.find("input").each(function(t,e){var a=$(e);-1!==["checkbox","radio"].indexOf(a.attr("type"))?a.prop("checked",!1):-1!==["submit"].indexOf(a.attr("type"))||(a.val(""),"playedAt"!==e.id&&a.prop("readonly",!1))}),i?i=null:(TRNMNT_helpers.disableButtons(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:l.resetGame,dataType:"json",contentType:"json",processData:!1,success:b,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})),r.empty(),o.empty(),n.addClass("d-none"),e.find("button").prop("disabled",!1))}function _(t){TRNMNT_helpers.enableButtons();var a=$('<table class="table table-sm table-striped mt-3"/>');e.append(a);var s=$("<tbody/>");a.append(s);var l=function(a){var l=t.data[a].game,c=new Date(l.playedAt),d=$(p.game.format({date:c.getShortDate(),home_team:l.home_team,away_team:l.away_team,home_score:l.home_score,away_score:l.away_score}));d.find("button").click(function(){n.removeClass("d-none"),e.find("button").prop("disabled",!1),$(this).prop("disabled",!0),function(t){for(var e in(i=t).game){var a=$("#".concat(e));-1!==["checkbox","radio"].indexOf(a.attr("type"))?a.prop("checked",!!i.game[e]):a.val(i.game[e]),""!==i.game[e]&&a.prop("readonly",!0)}!function(t){for(var e in r.empty(),o.empty(),t){var a="home"===e?r:o,n=!0,s=!1,i=void 0;try{for(var l,c=t[e][Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var d=l.value;a.append(p.player.format({tag:d.name,position:N(d.position_id,d.position),goals:d.goals,assists:d.assists,id:d.player_id,stars:p.starsSelect}))}}catch(t){s=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(s)throw i}}}}(i.players)}(t.data[a])}),s.append(d)};for(var c in t.data)l(c)}function N(t,e){var a="";switch(t){case 0:a="badge-goalie";break;case 1:a="badge-defender";break;case 3:a="badge-left_wing";break;case 4:a="badge-center";break;case 5:a="badge-right_wing"}return'<span class="badge '.concat(a,'">').concat(e.short_title,"</span>")}}()},UNwh:function(t,e,a){"use strict";a.r(e),e.default=function(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(t.selector).click(function(e){e.preventDefault(),confirm("Точно удалить?")&&$.ajax({type:"delete",url:t.url,dataType:"json",success:function(e){TRNMNT_helpers.enableButtons(),t.success(e)},error:TRNMNT_helpers.onErrorAjax})})}},a5cO:function(t,e,a){"use strict";a.r(e),e.default={showPreLoader:function(){$('<div id="bigPreloader"></div>').appendTo("body").html('\n                <span style="vertical-align:middle; display: table-cell;">\n                    <i class="fas fa-cog fa-spin fa-7x"></i>\n                </span>').css({position:"fixed",width:"100%",height:"100%",background:"rgba(255,255,255,0.9)",top:0,left:0,"z-index":1e5,"text-align":"center",display:"table"})},hidePreLoader:function(){$("#bigPreloader").remove()},disableButtons:function(t){$("input[type=submit], input[type=button], button").prop("disabled",!0),this.hidePreLoader(),t||this.showPreLoader()},enableButtons:function(){$("input[type=submit], input[type=button], button").prop("disabled",!1),this.hidePreLoader()},showNotification:function(t,e){var a={blockClass:"alert",duration:1e4,animationDuration:500,alertType:"success",types:{success:"alert-success",info:"alert-info",warning:"alert-warning",error:"alert-danger"},position:"se",margin:30},n={nw:{top:a.margin+"px",left:a.margin+"px"},ne:{top:a.margin+"px",right:a.margin+"px"},sw:{bottom:a.margin+"px",left:a.margin+"px"},se:{bottom:a.margin+"px",right:a.margin+"px"}};e=e||{},$.extend(!0,a,e);var r=-1!==["sw","se"].indexOf(a.position)?"bottom":"top",o=$('<div class="notification '+a.blockClass+" "+a.types[a.alertType]+'"></div>').click(function(t){var e,n,o,s;t.preventDefault(),e=$(this),n=$("."+a.blockClass),o=e.height()+2*parseInt(e.css("padding"))+10,s=n.index(e),e.hide(),n.each(function(t,e){var a=$(e);t<s&&a.css(r,parseInt(a.css(r))-o+"px")}),e.remove()}).css($.extend(!0,n[a.position],{position:"fixed",display:"none","z-index":1050})).appendTo("body").html(t).animate({opacity:"show"},a.animationDuration).delay(a.duration).animate({opacity:"hide"},a.animationDuration).delay(a.animationDuration).queue(function(){$(this).remove()});$("."+a.blockClass).not(o).each(function(t,e){var a=$(e),n=o.height()+2*parseInt(o.css("padding"))+10;a.css(r,parseInt(a.css(r))+n+"px")})},hideNotifications:function(){$(".notification").remove()},getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},jsonStringify:function(t,e){var a=JSON.stringify(t);return e?a:a.replace(/(\\\\)/g,"/").replace(/(\\n)/g," ").replace(/(\s+\\")/g," «").replace(/("\\")/g,'"«').replace(/(\\")/g,"»")},parseUrl:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,a=document.createElement("a"),n=null,r=[];a.href=e,(t=a.search.replace("?","")).length&&(n={},(t=(t=decodeURI(t)).split("&")).forEach(function(t){var e=t.split("=");n[e[0]]=e[1]})),t=a.pathname.split("/");for(var o=0;o<t.length;o++)""!==t[o]&&r.push(t[o]);return{url:a.href,protocol:a.protocol.replace(":",""),host:a.host,port:a.port,path:a.pathname,search:a.search,params:n,segments:r}},onErrorAjax:function(t){var e;if(void 0!==t.responseText){var a=(e=JSON.parse(t.responseText)).message;if(e.errors)for(var n in e.errors){var r=!0,o=!1,s=void 0;try{for(var i,l=e.errors[n][Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;a+="<br>".concat(n,": ").concat(c)}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}this.showNotification(a,{alertType:"error"})}else this.showNotification("Server error.",{alertType:"error"});this.enableButtons(),this.hidePreLoader()},updateCount:function(t,e){var a=$(t),n=parseInt(a.text())-1,r=a.parent();a.text(n),0===n&&(r.text(r.text().replace(/\s+\(.*/,"")),e&&$(e).show())},validateEmail:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},validateUrl:function(t){return/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/.test(t)},getDatePickerSettings:function(){return{format:"yyyy-mm-dd",weekStart:1,todayHighlight:!0,autoclose:!0,language:"ru"}}}},bUC5:function(t,e,a){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.TRNMNT_sendData=a("/Vo2").default,window.TRNMNT_deleteData=a("UNwh").default,window.TRNMNT_helpers=a("a5cO").default,a("GGTS"),Date.prototype.getShortDate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=1===this.getDate().toString().length?"0"+this.getDate():this.getDate(),n=1===(this.getMonth()+1).toString().length?"0"+(this.getMonth()+1):this.getMonth()+1;return e?this.getFullYear()+t+n+t+a:a+t+n+t+this.getFullYear()},Date.prototype.getFullDate=function(t){t=t||".";var e=1===this.getDate().toString().length?"0"+this.getDate():this.getDate(),a=1===(this.getMonth()+1).toString().length?"0"+(this.getMonth()+1):this.getMonth()+1,n=1===this.getHours().toString().length?"0"+this.getHours():this.getHours(),r=1===this.getMinutes().toString().length?"0"+this.getMinutes():this.getMinutes();return e+t+a+t+this.getFullYear()+" "+n+":"+r},Date.prototype.getDayBegin=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0)},String.prototype.format=function(){var t=-1,e=arguments;return this.replace(/#\{(.*?)\}/g,function(a,r){return"object"===n(e[0])?e[0][r]:e[++t]})}}});