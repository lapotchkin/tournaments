!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=4)}({"/Vo2":function(t,e,n){"use strict";n.r(e),e.default=function(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(t.selector).submit(function(e){e.preventDefault(),TRNMNT_helpers.disableButtons();for(var n=$(this),a=n.serializeArray(),r={},o=0;o<a.length;o+=1){a[o].value&&(r[a[o].name]=a[o].value);var i=n.find("[name="+a[o].name+"]");i.removeClass("is-invalid"),i.closest(".form-group").find(".invalid-feedback").empty()}$.ajax({type:t.method,url:t.url,data:r,dataType:"json",success:function(e){TRNMNT_helpers.enableButtons(),t.success(e)},error:function(t){for(var e in TRNMNT_helpers.onErrorAjax(t),t.responseJSON.errors){var a=t.responseJSON.errors[e],r=n.find("[name="+e+"]");r.addClass("is-invalid");for(var o="",i=0;i<a.length;i+=1)o+=a[i]+"<br>";r.closest(".form-group").find(".invalid-feedback").html(o)}}})})}},4:function(t,e,n){t.exports=n("bUC5")},GGTS:function(t,e){window.TRNMNT_gameFormModule=function(){var t=!1,e=null,n=null,a=null,r=null,o=null,i=null,s=null,l=null,c={game:'\n            <tr>\n                <td>#{date}</td>\n                <td class="text-right">#{home_team}</td>\n                <td class="text-right">\n                    <span class="badge badge-primary badge-pill">#{home_score}</span>\n                </td>\n                <td class="text-center">:</td>\n                <td>\n                    <span class="badge badge-primary badge-pill">#{away_score}</span>\n                </td>\n                <td>#{away_team}</td>\n                <td class="text-right">\n                    <button type="button" class="btn btn-primary btn-sm">Заполнить</button>\n                </td>\n            </tr>',player:'\n            <tr data-id="#{id}">\n                <td>#{tag}</td>\n                <td class="text-center">#{position}</td>\n                <td class="text-center">#{goals}</td>\n                <td class="text-center">#{assists}</td>\n                <td class="text-center">#{stars}</td>\n                <td></td>\n            </tr>',select:'\n            <select class="form-control form-control-sm">\n                <option value="0">—</option>\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n            </select>',playerForm:'\n            <form>\n                <tr>\n                    <td>#{player}</td>\n                    <td class="text-center" style="width:5rem;">#{position}</td>\n                    <td><input type="text" class="text-right form-control" name="goals"></td>\n                    <td><input type="text" class="text-right form-control" name="assists"></td>\n                    <td>#{star}</td>\n                    <td>#{button}</td>\n                </tr>\n            </form>'};return{init:function(s,u,f){if(t)return;if(t=!0,l=s,e=$("#eaGames"),n=$("#getGames"),a=$("#resetGame"),r=$("#homePlayers").find("tbody"),o=$("#awayPlayers").find("tbody"),(i=$("#game-form")).on("submit",p),n.on("click",g),a.on("click",m),u.length){var h=!0,y=!1,b=void 0;try{for(var x,T=u[Symbol.iterator]();!(h=(x=T.next()).done);h=!0){var N=x.value;(N.team_id===f?r:o).append(c.player.format({tag:N.player.tag,position:v(N.position_id,N.player_position),goals:N.goals,assists:N.assists,id:N.player_id,stars:d(N.star)}))}}catch(t){y=!0,b=t}finally{try{h||null==T.return||T.return()}finally{if(y)throw b}}}}};function d(t){for(var e="",n=0;n<t;n+=1)e+='<i class="fas fa-star text-danger"></i>';return e}function p(t){t.preventDefault(),TRNMNT_helpers.disableButtons(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:l.saveGame,dataType:"json",contentType:"json",processData:!1,data:s?u():f(),success:h,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})}function u(){for(var t in s.game){var e=$("#".concat(t));if(!1===e.prop("readonly")){var n=e.val();-1!==t.indexOf("_percent")&&(n=n?parseFloat(n.replace(",",".")):0),s.game[t]=n}}var a={};for(var i in r.find("select").each(function(t,e){var n=$(e),r=n.closest("tr").data("id");a[r]=+n.val()}),o.find("select").each(function(t,e){var n=$(e);a[n.data("id")]=+n.val()}),s.players){var l=!0,c=!1,d=void 0;try{for(var p,u=s.players[i][Symbol.iterator]();!(l=(p=u.next()).done);l=!0){var f=p.value;f.star=a[f.player_id]}}catch(t){c=!0,d=t}finally{try{l||null==u.return||u.return()}finally{if(c)throw d}}}return JSON.stringify(s)}function f(){for(var t=i.serializeArray(),e={game:{}},n=0;n<t.length;n+=1)if(t[n].value){var a=t[n].value;-1!==t[n].name.indexOf("_percent")&&(a=parseFloat(a.replace(",","."))),e.game[t[n].name]=a}return i.find("input[type=checkbox]").each(function(t,n){e.game[n.id]=+$(n).prop("checked")}),JSON.stringify(e)}function h(t){TRNMNT_helpers.enableButtons(),TRNMNT_helpers.showNotification(t.message),s&&(s=null)}function g(){TRNMNT_helpers.disableButtons(),e.empty(),$.ajax({url:l.lastGames,success:y,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})}function m(){confirm("На самом деле хотите обнулить протокол?")&&(i.find("input").each(function(t,e){var n=$(e);-1!==["checkbox","radio"].indexOf(n.attr("type"))?n.prop("checked",!1):-1!==["submit"].indexOf(n.attr("type"))||(n.val(""),"playedAt"!==e.id&&n.prop("readonly",!1))}),s?s=null:(TRNMNT_helpers.disableButtons(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"post",url:l.resetGame,dataType:"json",contentType:"json",processData:!1,success:h,error:TRNMNT_helpers.onErrorAjax,context:TRNMNT_helpers})),r.empty(),o.empty(),a.addClass("d-none"),e.find("button").prop("disabled",!1))}function y(t){TRNMNT_helpers.enableButtons();var n=$('<table class="table table-sm table-striped mt-3"/>');e.append(n);var i=$("<tbody/>");n.append(i);var l=function(n){var l=t.data[n].game,d=new Date(l.playedAt),p=$(c.game.format({date:d.getShortDate(),home_team:l.home_team,away_team:l.away_team,home_score:l.home_score,away_score:l.away_score}));p.find("button").click(function(){a.removeClass("d-none"),e.find("button").prop("disabled",!1),$(this).prop("disabled",!0),function(t){for(var e in(s=t).game){var n=$("#".concat(e));-1!==["checkbox","radio"].indexOf(n.attr("type"))?n.prop("checked",!!s.game[e]):n.val(s.game[e]),""!==s.game[e]&&n.prop("readonly",!0)}!function(t){for(var e in r.empty(),o.empty(),t){var n="home"===e?r:o,a=!0,i=!1,s=void 0;try{for(var l,d=t[e][Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var p=l.value;n.append(c.player.format({tag:p.name,position:v(p.position_id,p.position),goals:p.goals,assists:p.assists,id:p.player_id,stars:c.select}))}}catch(t){i=!0,s=t}finally{try{a||null==d.return||d.return()}finally{if(i)throw s}}}}(s.players)}(t.data[n])}),i.append(p)};for(var d in t.data)l(d)}function v(t,e){var n="";switch(t){case 0:n="badge-goalie";break;case 1:n="badge-defender";break;case 3:n="badge-left_wing";break;case 4:n="badge-center";break;case 5:n="badge-right_wing"}return'<span class="badge '.concat(n,'">').concat(e.short_title,"</span>")}}()},UNwh:function(t,e,n){"use strict";n.r(e),e.default=function(t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(t.selector).click(function(e){e.preventDefault(),confirm("Точно удалить?")&&$.ajax({type:"delete",url:t.url,dataType:"json",success:function(e){TRNMNT_helpers.enableButtons(),t.success(e)},error:TRNMNT_helpers.onErrorAjax})})}},a5cO:function(t,e,n){"use strict";n.r(e),e.default={showPreLoader:function(){$('<div id="bigPreloader"></div>').appendTo("body").html('\n                <span style="vertical-align:middle; display: table-cell;">\n                    <i class="fas fa-cog fa-spin fa-7x"></i>\n                </span>').css({position:"fixed",width:"100%",height:"100%",background:"rgba(255,255,255,0.9)",top:0,left:0,"z-index":1e5,"text-align":"center",display:"table"})},hidePreLoader:function(){$("#bigPreloader").remove()},disableButtons:function(t){$("input[type=submit], input[type=button], button").prop("disabled",!0),this.hidePreLoader(),t||this.showPreLoader()},enableButtons:function(){$("input[type=submit], input[type=button], button").prop("disabled",!1),this.hidePreLoader()},showNotification:function(t,e){var n={blockClass:"alert",duration:1e4,animationDuration:500,alertType:"success",types:{success:"alert-success",info:"alert-info",warning:"alert-warning",error:"alert-danger"},position:"se",margin:30},a={nw:{top:n.margin+"px",left:n.margin+"px"},ne:{top:n.margin+"px",right:n.margin+"px"},sw:{bottom:n.margin+"px",left:n.margin+"px"},se:{bottom:n.margin+"px",right:n.margin+"px"}};e=e||{},$.extend(!0,n,e);var r=-1!==["sw","se"].indexOf(n.position)?"bottom":"top",o=$('<div class="notification '+n.blockClass+" "+n.types[n.alertType]+'"></div>').click(function(t){var e,a,o,i;t.preventDefault(),e=$(this),a=$("."+n.blockClass),o=e.height()+2*parseInt(e.css("padding"))+10,i=a.index(e),e.hide(),a.each(function(t,e){var n=$(e);t<i&&n.css(r,parseInt(n.css(r))-o+"px")}),e.remove()}).css($.extend(!0,a[n.position],{position:"fixed",display:"none","z-index":1050})).appendTo("body").html(t).animate({opacity:"show"},n.animationDuration).delay(n.duration).animate({opacity:"hide"},n.animationDuration).delay(n.animationDuration).queue(function(){$(this).remove()});$("."+n.blockClass).not(o).each(function(t,e){var n=$(e),a=o.height()+2*parseInt(o.css("padding"))+10;n.css(r,parseInt(n.css(r))+a+"px")})},hideNotifications:function(){$(".notification").remove()},getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},jsonStringify:function(t,e){var n=JSON.stringify(t);return e?n:n.replace(/(\\\\)/g,"/").replace(/(\\n)/g," ").replace(/(\s+\\")/g," «").replace(/("\\")/g,'"«').replace(/(\\")/g,"»")},parseUrl:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,n=document.createElement("a"),a=null,r=[];n.href=e,(t=n.search.replace("?","")).length&&(a={},(t=(t=decodeURI(t)).split("&")).forEach(function(t){var e=t.split("=");a[e[0]]=e[1]})),t=n.pathname.split("/");for(var o=0;o<t.length;o++)""!==t[o]&&r.push(t[o]);return{url:n.href,protocol:n.protocol.replace(":",""),host:n.host,port:n.port,path:n.pathname,search:n.search,params:a,segments:r}},onErrorAjax:function(t){var e;if(void 0!==t.responseText){var n=(e=JSON.parse(t.responseText)).message;if(e.errors)for(var a in e.errors){var r=!0,o=!1,i=void 0;try{for(var s,l=e.errors[a][Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;n+="<br>".concat(a,": ").concat(c)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}this.showNotification(n,{alertType:"error"})}else this.showNotification("Server error.",{alertType:"error"});this.enableButtons(),this.hidePreLoader()},updateCount:function(t,e){var n=$(t),a=parseInt(n.text())-1,r=n.parent();n.text(a),0===a&&(r.text(r.text().replace(/\s+\(.*/,"")),e&&$(e).show())},validateEmail:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},validateUrl:function(t){return/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/.test(t)},getDatePickerSettings:function(){return{format:"yyyy-mm-dd",weekStart:1,todayHighlight:!0,autoclose:!0,language:"ru"}}}},bUC5:function(t,e,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.TRNMNT_sendData=n("/Vo2").default,window.TRNMNT_deleteData=n("UNwh").default,window.TRNMNT_helpers=n("a5cO").default,n("GGTS"),Date.prototype.getShortDate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=1===this.getDate().toString().length?"0"+this.getDate():this.getDate(),a=1===(this.getMonth()+1).toString().length?"0"+(this.getMonth()+1):this.getMonth()+1;return e?this.getFullYear()+t+a+t+n:n+t+a+t+this.getFullYear()},Date.prototype.getFullDate=function(t){t=t||".";var e=1===this.getDate().toString().length?"0"+this.getDate():this.getDate(),n=1===(this.getMonth()+1).toString().length?"0"+(this.getMonth()+1):this.getMonth()+1,a=1===this.getHours().toString().length?"0"+this.getHours():this.getHours(),r=1===this.getMinutes().toString().length?"0"+this.getMinutes():this.getMinutes();return e+t+n+t+this.getFullYear()+" "+a+":"+r},Date.prototype.getDayBegin=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0)},String.prototype.format=function(){var t=-1,e=arguments;return this.replace(/#\{(.*?)\}/g,function(n,r){return"object"===a(e[0])?e[0][r]:e[++t]})}}});